<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.10.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="de" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Pm2 Prozess Manager Einführung - x44 x4d x47</title>
<meta name="description" content="Eine kurze Einführung in den Prozess-Manger PM2">



<meta property="og:type" content="article">
<meta property="og:locale" content="de_DE">
<meta property="og:site_name" content="x44 x4d x47">
<meta property="og:title" content="Pm2 Prozess Manager Einführung">
<meta property="og:url" content="https://dg60.github.io/PM2-Prozess-Manager-Einf%C3%BChrung/">


  <meta property="og:description" content="Eine kurze Einführung in den Prozess-Manger PM2">



  <meta property="og:image" content="https://dg60.github.io/images/docs/pm2_small.png">



  <meta name="twitter:site" content="@60dmg">
  <meta name="twitter:title" content="Pm2 Prozess Manager Einführung">
  <meta name="twitter:description" content="Eine kurze Einführung in den Prozess-Manger PM2">
  <meta name="twitter:url" content="https://dg60.github.io/PM2-Prozess-Manager-Einf%C3%BChrung/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://dg60.github.io/images/docs/pm2_small.png">
    
  

  



  <meta property="article:published_time" content="2016-12-08T00:00:00+01:00">





  

  


<link rel="canonical" href="https://dg60.github.io/PM2-Prozess-Manager-Einf%C3%BChrung/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Daniel Grill",
      "url": "https://dg60.github.io",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="googledc32a20f3ee3a459.html" />





<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="x44 x4d x47 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://dg60.github.io/assets/css/main.css">
<link rel="icon" href="/favicon.ico" type="image/favicon.icon">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://dg60.github.io/">x44 x4d x47</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/blog_de/" >Blog</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/about_de/" >Über mich</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/work_de/" >Projekte</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/docs/linux_01/" >CLI Befehle</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/downloads/" >Downloads</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://dg60.github.io/impressum/" >Impressum</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Menü ein-/ausschalten</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://dg60.github.io/images/bio-photo.jpg" alt="Daniel Grill" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Daniel Grill</h3>
    
    
      <p class="author__bio" itemprop="description">
        Technikfreak
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Folgen</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Österreich/Austria</span>
        </li>
      

      
        <li>
          <a href="https://dg60.github.io/" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i> Webseite
          </a>
        </li>
      

      
        <li>
          <a href="mailto:info@dgrill.at">
            <meta itemprop="email" content="info@dgrill.at" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> E-Mail
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/60dmg" itemprop="sameAs">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      
        <li>
          <a href="https://www.facebook.com/danielmichael.grill" itemprop="sameAs">
            <i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/daniel-grill-685816127" itemprop="sameAs">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/dg60" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Pm2 Prozess Manager Einführung">
    <meta itemprop="description" content="Eine kurze Einführung in den Prozess-Manger PM2">
    <meta itemprop="datePublished" content="December 08, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Pm2 Prozess Manager Einführung
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 Minuten zum lesen
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">It´s time to code</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>Hallo,</p>

<p>Heute möchte ich euch kurz den Prozessmanager <a href="http://pm2.keymetrics.io/">PM2</a> vorstellen. Der mittels CLI Interface sehr komfortabel 
gesteuert werden kann.</p>

<p><img src="/images/docs/pm2_small.png" alt="image-center" class="align-center" /></p>

<p><strong>Primäre Aufgaben eines Prozessmanagers:</strong></p>

<ul>
  <li>Automatischer Neustart der Anwendung nach einem Absturz</li>
  <li>Protokollierung im Fehlerfall</li>
  <li>Monitorring des Laufzeitverhaltens und der Ressourcennutzung</li>
  <li>Nachladen von Programmen ohne Ausfallzeit</li>
  <li>uvm.</li>
</ul>

<p>PM2 ist primär für den Einsatz in einer Produktivumgebung gedacht um bei einen Absturz einer Anwendung diese neu zu starten und den Fehler in einem Logfile
festzuhalten. Gerade in der Releasephase einer Anwendung ist es von großen Vorteil das nicht jedes mal die Anwendung von Hand neu gestartet werden muss wenn 
ein Fehler auftritt.</p>

<p>PM2 unterstützt eine breite Palette von folgenden Skriptsprachen:</p>

<ul>
  <li>Javascript (Node.js)</li>
  <li>Python</li>
  <li>Ruby</li>
  <li>uvm.</li>
</ul>

<h2 id="installation">Installation</h2>

<p>PM2 lässt sich ganz einfach über den Node Packet Manager (npm) mit folgenden Befehl installieren:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> pm2
</code></pre></div></div>

<p>Nach der Installation prüfen wir noch ob PM2 auch ordnungsgemäß installiert worden ist mit folgenden Befehl:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 
</code></pre></div></div>

<p>Und wir sollten folgende Ausgabe erhalten:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Basic Examples:

    Start an app using all CPUs available + <span class="nb">set </span>a name :
    <span class="nv">$ </span>pm2 start app.js <span class="nt">-i</span> 0 <span class="nt">--name</span> <span class="s2">"api"</span>

    Restart the previous app launched, by name :
    <span class="nv">$ </span>pm2 restart api

    Stop the app :
    <span class="nv">$ </span>pm2 stop api

    Restart the app that is stopped :
    <span class="nv">$ </span>pm2 restart api

    Remove the app from the process list :
    <span class="nv">$ </span>pm2 delete api

    Kill daemon pm2 :
    <span class="nv">$ </span>pm2 <span class="nb">kill

    </span>Update pm2 :
    <span class="nv">$ </span>npm <span class="nb">install </span>pm2@latest <span class="nt">-g</span> <span class="p">;</span> pm2 update

    More examples <span class="k">in </span>https://github.com/Unitech/pm2#usagefeatures

  Deployment <span class="nb">help</span>:

    <span class="nv">$ </span>pm2 deploy <span class="nb">help</span>
</code></pre></div></div>

<h2 id="erste-schritte-mit-pm2">Erste Schritte mit PM2</h2>

<p>Um einen Prozess über PM2 zu starten brauchen wir erst einmal ein kleines Skript. Dafür kopieren wir den unten angeführten Quellcode in einen Datei 
und geben ihr den Namen app.js.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text/plain</span><span class="dl">"</span><span class="p">});</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello PM2</span><span class="se">\n</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusMessage</span><span class="p">);</span>
<span class="p">});</span> 

<span class="c1">// Listen on port 8000, IP defaults to 127.0.0.1</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server running at http://127.0.0.1:8000/</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">//app.js</span>

</code></pre></div></div>

<p>Anschließend starten wie das Skript mit PM2 mit folgenden Befehl:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start app.js <span class="nt">--name</span> <span class="s2">"app"</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>PM2] Spawning PM2 daemon with <span class="nv">pm2_home</span><span class="o">=</span>/home/dgrill/.pm2
<span class="o">[</span>PM2] PM2 Successfully daemonized
<span class="o">[</span>PM2] Starting /home/dgrill/Schreibtisch/TEMP/app.js <span class="k">in </span>fork_mode <span class="o">(</span>1 instance<span class="o">)</span>
<span class="o">[</span>PM2] Done.
┌──────────┬────┬──────┬───────┬────────┬─────────┬────────┬─────┬───────────┬──────────┐
│ App name │ <span class="nb">id</span> │ mode │ pid   │ status │ restart │ <span class="nb">uptime</span> │ cpu │ mem       │ watching │
├──────────┼────┼──────┼───────┼────────┼─────────┼────────┼─────┼───────────┼──────────┤
│ app      │ 0  │ fork │ 20211 │ online │ 0       │ 0s     │ 2%  │ 20.0 MB   │ disabled │
└──────────┴────┴──────┴───────┴────────┴─────────┴────────┴─────┴───────────┴──────────┘
 Use <span class="sb">`</span>pm2 show &lt;<span class="nb">id</span>|name&gt;<span class="sb">`</span> to get more details about an app
</code></pre></div></div>
<p>Und sehen in der Ausgabe das der Prozess nun erfolgreich gestartet worden ist. <br />
Sollte unser kleine Anwendung nun einen Fehler produzieren wird der Prozess automatisch von PM2 neu 
gestartet und der restart counter erhöht. Des weiteren wird ein Eintrag im Error Log angelegt das Standardmässig unter linux im folgenden Verzeichnis zu finden ist (/home/user/.pm2/logs). Zusätzlich zum überwachen
und neustarten von Prozessen zeichnet PM2 auch alle Logmeldungen auf, die von der Applikation in die Standard Ausgabe geschrieben werden.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/user/.pm2
├── logs
│   ├── app-error-0.log
│   └── app-out-0.log
├── module_conf.json
├── pids
│   └── app-0.pid
├── pm2.log
├── pm2.pid
├── pub.sock
├── rpc.sock
└── <span class="nb">touch

</span>2 directories, 9 files
</code></pre></div></div>

<h2 id="log-einträge-anzeigen">Log Einträge anzeigen</h2>

<p>Um sich die aktuellen Logmeldungen des laufenden Prozess live anzusehen geben wir folgenden Befehl ein:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 logs app
</code></pre></div></div>
<p>Und wir erhalten folgende Ausgabe:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>STREAMING] Now streaming realtime logs <span class="k">for</span> <span class="o">[</span>app] process
</code></pre></div></div>
<p>Rufen wir nun in unseren Browser folgenden Link auf <a href="http://localhost:8000/">http://localhost:8000/</a> und senden somit eine Anfrage an unsere Applikation. 
Werden die Logmeldungen in Echtzeit ausgegeben.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0|app      | 200 OK 
0|app      | 200 OK 
</code></pre></div></div>

<h2 id="starten-von-prozesse-via-configjson">Starten von Prozesse via config.json</h2>

<p>Sollen mehrere Anwendungen von PM2 überwacht werden bittet es sich an alle Prozesse in eine json Datei zusammen zu fassen. Somit können mehrere Prozesse mit 
einen Befehl von PM2 überwacht werden.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"script"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/dgrill/Schreibtisch/TEMP/app/app.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merge_logs"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_date_format"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-DD HH:mm Z"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"script"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/dgrill/Schreibtisch/TEMP/app_1/app_1.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"app_1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merge_logs"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_date_format"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-DD HH:mm Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>
<p>process.json</p>

<p>Das Starten der Anwendung folgt wie schon oben beschrieben über den Befehl pm2 start nur mit dem Unterschied das wir hier die config.json datei angeben.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start process.json 
<span class="o">[</span>PM2][WARN] Applications app, app_1 not running, starting...
<span class="o">[</span>PM2] App <span class="o">[</span>app] launched <span class="o">(</span>1 instances<span class="o">)</span>
<span class="o">[</span>PM2] App <span class="o">[</span>app_1] launched <span class="o">(</span>1 instances<span class="o">)</span>
┌──────────┬────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬──────────┐
│ App name │ <span class="nb">id</span> │ mode │ pid  │ status │ restart │ <span class="nb">uptime</span> │ cpu │ mem       │ watching │
├──────────┼────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼──────────┤
│ app      │ 0  │ fork │ 2019 │ online │ 0       │ 0s     │ 0%  │ 17.2 MB   │ disabled │
│ app_1    │ 1  │ fork │ 2024 │ online │ 0       │ 0s     │ 0%  │ 16.6 MB   │ disabled │
└──────────┴────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴──────────┘
 Use <span class="sb">`</span>pm2 show &lt;<span class="nb">id</span>|name&gt;<span class="sb">`</span> to get more details about an app
</code></pre></div></div>

<p>Neustarten der Prozesse</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 restart process.json 
<span class="o">[</span>PM2] Applying action restartProcessId on app <span class="o">[</span>app]<span class="o">(</span>ids: 0<span class="o">)</span>
<span class="o">[</span>PM2] Applying action restartProcessId on app <span class="o">[</span>app_1]<span class="o">(</span>ids: 1<span class="o">)</span>
<span class="o">[</span>PM2] <span class="o">[</span>app]<span class="o">(</span>0<span class="o">)</span> ✓
<span class="o">[</span>PM2] <span class="o">[</span>app_1]<span class="o">(</span>1<span class="o">)</span> ✓
┌──────────┬────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬──────────┐
│ App name │ <span class="nb">id</span> │ mode │ pid  │ status │ restart │ <span class="nb">uptime</span> │ cpu │ mem       │ watching │
├──────────┼────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼──────────┤
│ app      │ 0  │ fork │ 7131 │ online │ 0       │ 10s    │ 0%  │ 17.3 MB   │ disabled │
│ app_1    │ 1  │ fork │ 7136 │ online │ 0       │ 10s    │ 0%  │ 15.2 MB   │ disabled │
└──────────┴────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴──────────┘
 Use <span class="sb">`</span>pm2 show &lt;<span class="nb">id</span>|name&gt;<span class="sb">`</span> to get more details about an app

</code></pre></div></div>

<p>Stoppen der Prozesse</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 stop process.json 
<span class="o">[</span>PM2] <span class="o">[</span>app]<span class="o">(</span>0<span class="o">)</span> ✓
<span class="o">[</span>PM2] <span class="o">[</span>app_1]<span class="o">(</span>1<span class="o">)</span> ✓
┌──────────┬────┬──────┬─────┬─────────┬─────────┬────────┬─────┬────────┬──────────┐
│ App name │ <span class="nb">id</span> │ mode │ pid │ status  │ restart │ <span class="nb">uptime</span> │ cpu │ mem    │ watching │
├──────────┼────┼──────┼─────┼─────────┼─────────┼────────┼─────┼────────┼──────────┤
│ app      │ 0  │ fork │ 0   │ stopped │ 0       │ 12     │ 0%  │ 0 B    │ disabled │
│ app_1    │ 1  │ fork │ 0   │ stopped │ 0       │ 12     │ 0%  │ 0 B    │ disabled │
└──────────┴────┴──────┴─────┴─────────┴─────────┴────────┴─────┴────────┴──────────┘
 Use <span class="sb">`</span>pm2 show &lt;<span class="nb">id</span>|name&gt;<span class="sb">`</span> to get more details about an app
</code></pre></div></div>
<p>Der weitere große Vorteil von eine config.json datei ist das alle in diese enthalten Datei auf einmal gestartet/gestoppt oder neu gestartet
werden können. Und somit auch Abhängigkeiten von Prozessen berücksichtigt werden können.</p>

<h2 id="pm2-im-produktiven-einsatz">PM2 im produktiven Einsatz</h2>

<p>Um nun PM2 produktiv einzusetzen müssen noch ein paar Grundeinstellungen vorgenommen werden. 
Als erstes müssen wie PM2 als dameon(bzw. Dienst) einrichten. Hierzu reicht uns erstmals folgender Befehl:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 startup
<span class="o">[</span>PM2] You have to run this <span class="nb">command </span>as root. Execute the following <span class="nb">command</span>:
      <span class="nb">sudo </span>su <span class="nt">-c</span> <span class="s2">"env PATH=</span><span class="nv">$PATH</span><span class="s2">:/home/unitech/.nvm/versions/node/v4.3/bin pm2 startup &lt;distribution&gt; -u &lt;user&gt; --hp &lt;home-path&gt;
</span></code></pre></div></div>
<p>PM2 erstellt durch diesen Befehl automatisch ein Startscript für unser System und mit dem Befehl aus der Ausgabe wird das Startscript für den Systemstart registriert.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>PM2] Spawning PM2 daemon with <span class="nv">pm2_home</span><span class="o">=</span>/root/.pm2
<span class="o">[</span>PM2] PM2 Successfully daemonized
<span class="o">[</span>PM2] Writing startup script <span class="k">in</span> /etc/init.d/pm2-init.sh
<span class="o">[</span>PM2] Making script booting at startup...
<span class="o">[</span>PM2] <span class="nt">-linux-</span> Using the <span class="nb">command</span>:
      su <span class="nt">-c</span> <span class="s2">"chmod +x /etc/init.d/pm2-init.sh &amp;&amp; update-rc.d pm2-init.sh defaults"</span>
<span class="o">[</span>PM2] Done.

<span class="o">[</span>PM2] Now you can <span class="nb">type</span>
<span class="nv">$ </span>pm2 save
<span class="o">[</span>PM2] To save the current process list at reboot or via pm2 update
</code></pre></div></div>

<p>Wurde das Startskript erfolgreich im System registriert erhalten wir noch den Hinweise den Befehl pm2 save auszuführen.</p>

<p class="notice--warning"><strong>$ pm2 save</strong></p>

<p>Und das sollte wir auch auf alle Fälle tun wenn wir alle aktuellen prozesse speichern wollen und somit sicherstellen das nach einen Systemneustart alle Prozesse gestartet werden. Sollten wir das Speichern der Prozesse vergessen wird nach einen 
Systemneustart von PM2 kein Prozess gestartet. PM2 save muss auch jedes mal ausgeführt werden wenn wir einen neuen Prozess hinzufügen.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">See you !</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mehr-informationen">Mehr Informationen</h2>

<p>Eine Sammlung der Wichtigsten PM2 Befehle<br />
<a href="/docs/pm2_30">PM2 Kommandoreferenz</a></p>

<p>Die offiziele Dokumentation von PM2<br />
<a href="http://pm2.keymetrics.io/docs/usage/cluster-mode/">PM2 Official Docs</a></p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Aktualisiert:</strong> <time datetime="2016-12-08T00:00:00+01:00">December 08, 2016</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Teilen auf</h4>
  

  <a href="https://twitter.com/intent/tweet?via=60dmg&text=Pm2+Prozess+Manager+Einf%C3%BChrung%20https%3A%2F%2Fdg60.github.io%2FPM2-Prozess-Manager-Einf%25C3%25BChrung%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Teilen auf Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdg60.github.io%2FPM2-Prozess-Manager-Einf%25C3%25BChrung%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Teilen auf Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Fdg60.github.io%2FPM2-Prozess-Manager-Einf%25C3%25BChrung%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Teilen auf Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdg60.github.io%2FPM2-Prozess-Manager-Einf%25C3%25BChrung%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Teilen auf LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://dg60.github.io/Node-Red-Einf%C3%BChrung/" class="pagination--pager" title="Node Red Einführung
">Vorherige</a>
    
    
      <a href="https://dg60.github.io/NMAP/" class="pagination--pager" title="Nmap
">Nächste</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Ihnen gefällt vielleicht auch</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://dg60.github.io/images/works/CodeGenerator/CodeGen_BuR.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://dg60.github.io/Code-Generator-BETA-Release/" rel="permalink">Code Generator Beta Release
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  weniger als 1 Minuten zum lesen
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Codegenerator
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://dg60.github.io/images/docs/metasploit.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://dg60.github.io/Metasploit/" rel="permalink">Metasploit
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  18 Minuten zum lesen
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Eine kurze Einführung in das Metasploit Framework
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://dg60.github.io/images/docs/nmap.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://dg60.github.io/NMAP/" rel="permalink">Nmap
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  13 Minuten zum lesen
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Eine kurze Einführung in den Netzwerk/Portscanner Nmap
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://dg60.github.io/images/docs/node-red-icon.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://dg60.github.io/Node-Red-Einf%C3%BChrung/" rel="permalink">Node Red Einführung
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 Minuten zum lesen
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Eine kurze Einführung in Node-RED
</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Folgen:</strong></li>
    
    
      <li><a href="https://twitter.com/60dmg"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
      <li><a href="https://www.facebook.com/danielmichael.grill"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    
    
      <li><a href="https://github.com/dg60"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Daniel Grill. Möglich durch <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="https://dg60.github.io/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>




<script src="https://dg60.github.io/assets/js/lunr/lunr.min.js"></script>
<script src="https://dg60.github.io/assets/js/lunr/lunr-store.js"></script>
<script src="https://dg60.github.io/assets/js/lunr/lunr-en.js"></script>





  </body>
</html>